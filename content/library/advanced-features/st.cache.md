---
æ ‡é¢˜: ä½¿ç”¨st.cacheä¼˜åŒ–æ€§èƒ½
é“¾æ¥: /library/advanced-features/st.cache

<å¼ƒç”¨>

`st.cache`åœ¨ç‰ˆæœ¬1.18.0ä¸­å·²è¢«å¼ƒç”¨ã€‚è¯·ä½¿ç”¨[`st.cache_data`](/library/api-reference/performance/st.cache_data)æˆ–[`st.cache_resource`](/library/api-reference/performance/st.cache_resource)æ›¿ä»£ã€‚äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[Caching](/library/advanced-features/caching)ã€‚

</å¼ƒç”¨>

# ä½¿ç”¨st.cacheä¼˜åŒ–æ€§èƒ½

Streamlitæä¾›äº†ä¸€ä¸ªç¼“å­˜æœºåˆ¶ï¼Œä½¿å¾—æ‚¨çš„åº”ç”¨åœ¨ä»ç½‘ç»œåŠ è½½æ•°æ®ã€æ“ä½œå¤§å‹æ•°æ®é›†æˆ–è¿›è¡Œæ˜‚è´µçš„è®¡ç®—æ—¶ä¿æŒé«˜æ€§èƒ½ã€‚è¿™æ˜¯é€šè¿‡ä½¿ç”¨`@st.cache`è£…é¥°å™¨å®Œæˆçš„ã€‚

å½“æ‚¨ä½¿ç”¨`@st.cache`è£…é¥°å™¨æ ‡è®°ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå®ƒå‘Šè¯‰Streamlitåœ¨æ¯æ¬¡è°ƒç”¨è¯¥å‡½æ•°æ—¶éœ€è¦æ£€æŸ¥å‡ ä»¶äº‹æƒ…:

1. æ‚¨è°ƒç”¨å‡½æ•°æ—¶ä½¿ç”¨çš„è¾“å…¥å‚æ•°
2. å‡½æ•°ä¸­ä½¿ç”¨çš„å¤–éƒ¨å˜é‡çš„å€¼
3. å‡½æ•°çš„ä¸»ä½“éƒ¨åˆ†
4. ç¼“å­˜å‡½æ•°å†…éƒ¨ä½¿ç”¨çš„å‡½æ•°çš„ä¸»ä½“éƒ¨åˆ†

å¦‚æœè¿™æ˜¯Streamlitç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™å››ä¸ªå…·æœ‰è¿™äº›ç¡®åˆ‡å€¼çš„ç»„ä»¶ï¼Œå¹¶ä¸”ä»¥è¿™ä¸ªç¡®åˆ‡çš„ç»„åˆå’Œé¡ºåºï¼Œå®ƒä¼šè¿è¡Œè¯¥å‡½æ•°å¹¶å°†ç»“æœå­˜å‚¨åœ¨æœ¬åœ°ç¼“å­˜ä¸­ã€‚ç„¶åï¼Œä¸‹æ¬¡è°ƒç”¨ç¼“å­˜çš„å‡½æ•°æ—¶ï¼Œå¦‚æœè¿™äº›ç»„ä»¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼ŒStreamlitå°†ç›´æ¥è·³è¿‡æ‰§è¡Œå‡½æ•°ï¼Œå¹¶è¿”å›ä¹‹å‰å­˜å‚¨åœ¨ç¼“å­˜ä¸­çš„è¾“å‡ºã€‚

Streamlitè·Ÿè¸ªè¿™äº›ç»„ä»¶çš„å˜åŒ–æ–¹å¼æ˜¯é€šè¿‡å“ˆå¸Œã€‚å¯ä»¥å°†ç¼“å­˜è§†ä¸ºä¸€ä¸ªå†…å­˜ä¸­çš„é”®å€¼å­˜å‚¨ï¼Œå…¶ä¸­é”®æ˜¯ä¸Šè¿°æ‰€æœ‰å†…å®¹çš„å“ˆå¸Œï¼Œå€¼æ˜¯é€šè¿‡å¼•ç”¨ä¼ é€’çš„å®é™…è¾“å‡ºå¯¹è±¡ã€‚

æœ€åï¼Œ[`@st.cache`](/library/api-reference/performance/st.cache)æ”¯æŒé…ç½®ç¼“å­˜è¡Œä¸ºçš„å‚æ•°ã€‚æ‚¨å¯ä»¥åœ¨æˆ‘ä»¬çš„[APIå‚è€ƒæ–‡æ¡£](/library/api-reference)ä¸­æ‰¾åˆ°æ›´å¤šå…³äºè¿™äº›å‚æ•°çš„ä¿¡æ¯ã€‚

è®©æˆ‘ä»¬æ¥çœ‹ä¸€äº›ç¤ºä¾‹ï¼Œä»¥è¯´æ˜åœ¨Streamlitåº”ç”¨ä¸­ç¼“å­˜æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚

## ç¤ºä¾‹1ï¼šåŸºæœ¬ç”¨æ³•

é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç¤ºä¾‹åº”ç”¨ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªæ‰§è¡Œè€—æ—¶çš„è®¡ç®—çš„å‡½æ•°ã€‚å¦‚æœæ²¡æœ‰ç¼“å­˜ï¼Œæ¯æ¬¡åˆ·æ–°åº”ç”¨æ—¶éƒ½ä¼šé‡æ–°è¿è¡Œè¯¥å‡½æ•°ï¼Œå¯¼è‡´ç”¨æˆ·ä½“éªŒä¸ä½³ã€‚å°†ä»¥ä¸‹ä»£ç å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„åº”ç”¨ä¸­ï¼Œè‡ªè¡Œå°è¯•ä¸€ä¸‹ï¼š

```python
import streamlit as st
import time

def expensive_computation(a, b):
    time.sleep(2)  # ğŸ‘ˆ This makes the function take 2s to run
    return a * b

a = 2
b = 21
res = expensive_computation(a, b)

st.write("Result:", res)
```

å°è¯•æŒ‰ä¸‹ **R** é”®é‡æ–°è¿è¡Œåº”ç”¨ç¨‹åºï¼Œå¹¶æ³¨æ„ç»“æœæ˜¾ç¤ºå‡ºæ¥éœ€è¦å¤šé•¿æ—¶é—´ã€‚è¿™æ˜¯å› ä¸º `expensive_computation(a, b)` æ¯æ¬¡åº”ç”¨ç¨‹åºè¿è¡Œæ—¶éƒ½ä¼šè¢«é‡æ–°æ‰§è¡Œã€‚è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä½“éªŒã€‚

è®©æˆ‘ä»¬æ·»åŠ  [`@st.cache`](/library/api-reference/performance/st.cache) è£…é¥°å™¨ï¼š

```python
import streamlit as st
import time

@st.cache  # ğŸ‘ˆ Added this
def expensive_computation(a, b):
    time.sleep(2)  # This makes the function take 2s to run
    return a * b

a = 2
b = 21
res = expensive_computation(a, b)

st.write("Result:", res)
```

ç°åœ¨å†æ¬¡è¿è¡Œåº”ç”¨ç¨‹åºï¼Œæ‚¨ä¼šæ³¨æ„åˆ°æ¯æ¬¡æŒ‰ä¸‹Ré‡æ–°è¿è¡Œæ—¶ï¼Œé€Ÿåº¦éƒ½ä¼šæ›´å¿«ã€‚ä¸ºäº†äº†è§£å‘ç”Ÿäº†ä»€ä¹ˆï¼Œè®©æˆ‘ä»¬åœ¨å‡½æ•°å†…éƒ¨æ·»åŠ ä¸€ä¸ªst.writeï¼š

```python
import streamlit as st
import time

@st.cache(suppress_st_warning=True)  # ğŸ‘ˆ Changed this
def expensive_computation(a, b):
    # ğŸ‘‡ Added this
    st.write("Cache miss: expensive_computation(", a, ",", b, ") ran")
    time.sleep(2)  # This makes the function take 2s to run
    return a * b

a = 2
b = 21
res = expensive_computation(a, b)

st.write("Result:", res)
```

ç°åœ¨ï¼Œå½“æ‚¨é‡æ–°è¿è¡Œåº”ç”¨ç¨‹åºæ—¶ï¼Œç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ä¼šå‡ºç°æ–‡æœ¬â€œCache missâ€ï¼Œä½†åœ¨éšåçš„è¿è¡Œä¸­ä¸ä¼šå‡ºç°ã€‚è¿™æ˜¯å› ä¸ºç¼“å­˜å‡½æ•°åªè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œä¹‹åæ¯æ¬¡éƒ½æ˜¯ä»ç¼“å­˜ä¸­è·å–ã€‚

<æ³¨æ„>

æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œåœ¨`@st.cache`è£…é¥°å™¨ä¸­æˆ‘ä»¬æ·»åŠ äº†`suppress_st_warning`å…³é”®å­—ã€‚è¿™æ˜¯å› ä¸ºä¸Šé¢çš„ç¼“å­˜å‡½æ•°æœ¬èº«ä½¿ç”¨äº†Streamlitçš„å‘½ä»¤ï¼ˆåœ¨æœ¬ä¾‹ä¸­æ˜¯`st.write`ï¼‰ï¼Œå½“Streamlitå‘ç°è¿™ä¸€ç‚¹æ—¶ï¼Œä¼šæ˜¾ç¤ºä¸€ä¸ªè­¦å‘Šï¼Œå‘Šè¯‰æ‚¨çš„å‘½ä»¤åªä¼šåœ¨ç¼“å­˜æœªå‘½ä¸­æ—¶æ‰§è¡Œã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå½“æ‚¨çœ‹åˆ°è¿™ä¸ªè­¦å‘Šæ—¶ï¼Œæ„å‘³ç€æ‚¨çš„ä»£ç ä¸­å­˜åœ¨bugã€‚ç„¶è€Œï¼Œåœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨`st.write`å‘½ä»¤æ¥æ¼”ç¤ºç¼“å­˜æœªå‘½ä¸­çš„æƒ…å†µï¼Œæ‰€ä»¥Streamlitè­¦å‘Šæˆ‘ä»¬çš„è¡Œä¸ºæ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¼ å…¥`suppress_st_warning=True`æ¥å…³é—­è¿™ä¸ªè­¦å‘Šã€‚

</Note>

## ç¤ºä¾‹2ï¼šå½“å‡½æ•°å‚æ•°å‘ç”Ÿå˜åŒ–æ—¶

åœ¨ä¸åœæ­¢ä¹‹å‰çš„åº”ç”¨æœåŠ¡å™¨çš„æƒ…å†µä¸‹ï¼Œè®©æˆ‘ä»¬å°†ç¼“å­˜å‡½æ•°çš„ä¸€ä¸ªå‚æ•°æ›´æ”¹ä¸ºï¼š

```python
import streamlit as st
import time

@st.cache(suppress_st_warning=True)
def expensive_computation(a, b):
    st.write("Cache miss: expensive_computation(", a, ",", b, ") ran")
    time.sleep(2)  # This makes the function take 2s to run
    return a * b

a = 2
b = 210  # ğŸ‘ˆ Changed this
res = expensive_computation(a, b)

st.write("Result:", res)
```

ç°åœ¨ï¼Œå½“æ‚¨ç¬¬ä¸€æ¬¡é‡æ–°è¿è¡Œåº”ç”¨ç¨‹åºæ—¶ï¼Œä¼šå‘ç”Ÿç¼“å­˜æœªå‘½ä¸­ã€‚è¿™å¯ä»¥é€šè¿‡å‡ºç°â€œCache missâ€æ–‡æœ¬å’Œåº”ç”¨ç¨‹åºèŠ±è´¹2ç§’å®Œæˆè¿è¡Œæ¥è¯æ˜ã€‚ä¹‹åï¼Œå¦‚æœæ‚¨æŒ‰ä¸‹**R**é‡æ–°è¿è¡Œï¼Œå®ƒæ€»æ˜¯ä¼šå‘½ä¸­ç¼“å­˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ä¼šå‡ºç°è¿™æ ·çš„æ–‡æœ¬ï¼Œå¹¶ä¸”åº”ç”¨ç¨‹åºå†æ¬¡å˜å¾—å¿«é€Ÿã€‚

è¿™æ˜¯å› ä¸ºStreamlitä¼šæ³¨æ„åˆ°å‚æ•°**a**å’Œ**b**ä½•æ—¶å‘ç”Ÿå˜åŒ–ï¼Œå¹¶ç¡®å®šæ˜¯å¦åº”é‡æ–°æ‰§è¡Œå’Œé‡æ–°ç¼“å­˜è¯¥å‡½æ•°ã€‚

## ç¤ºä¾‹3ï¼šå½“å‡½æ•°ä½“å‘ç”Ÿå˜åŒ–æ—¶

åœ¨ä¸åœæ­¢å’Œé‡æ–°å¯åŠ¨StreamlitæœåŠ¡å™¨çš„æƒ…å†µä¸‹ï¼Œè®©æˆ‘ä»¬ä»æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ç§»é™¤å°éƒ¨ä»¶ï¼Œå¹¶é€šè¿‡åœ¨è¿”å›å€¼ä¸­æ·»åŠ `+ 1`æ¥ä¿®æ”¹å‡½æ•°çš„ä»£ç ã€‚

```python
import streamlit as st
import time

@st.cache(suppress_st_warning=True)
def expensive_computation(a, b):
    st.write("Cache miss: expensive_computation(", a, ",", b, ") ran")
    time.sleep(2)  # This makes the function take 2s to run
    return a * b + 1  # ğŸ‘ˆ Added a +1 at the end here

a = 2
b = 210
res = expensive_computation(a, b)

st.write("Result:", res)
```

ç¬¬ä¸€æ¬¡è¿è¡Œæ˜¯ä¸€ä¸ª"ç¼“å­˜æœªå‘½ä¸­"ï¼Œä½†æ˜¯å½“ä½ æŒ‰ä¸‹**R**é”®åï¼Œæ¯æ¬¡åç»­çš„è¿è¡Œéƒ½æ˜¯ç¼“å­˜å‘½ä¸­ã€‚è¿™æ˜¯å› ä¸ºåœ¨ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ï¼ŒStreamlitæ£€æµ‹åˆ°å‡½æ•°ä½“å‘ç”Ÿäº†å˜åŒ–ï¼Œé‡æ–°è¿è¡Œäº†å‡½æ•°ï¼Œå¹¶å°†ç»“æœæ”¾å…¥ç¼“å­˜ä¸­ã€‚

<æç¤º>

å¦‚æœä½ å°†å‡½æ•°æ”¹å›æ¥ï¼Œç»“æœå°†å·²ç»å­˜å‚¨åœ¨Streamlitç¼“å­˜ä¸­ï¼Œæ¥è¯•è¯•å§ï¼

</æç¤º>

## ç¤ºä¾‹4: å½“å†…éƒ¨å‡½æ•°å‘ç”Ÿå˜åŒ–æ—¶

è®©æˆ‘ä»¬ä½¿æˆ‘ä»¬çš„ç¼“å­˜å‡½æ•°ä¾èµ–äºå¦ä¸€ä¸ªå†…éƒ¨å‡½æ•°:

```python
import streamlit as st
import time

def inner_func(a, b):
    st.write("inner_func(", a, ",", b, ") ran")
    return a * b

@st.cache(suppress_st_warning=True)
def expensive_computation(a, b):
    st.write("Cache miss: expensive_computation(", a, ",", b, ") ran")
    time.sleep(2)  # This makes the function take 2s to run
    return inner_func(a, b) + 1

a = 2
b = 210
res = expensive_computation(a, b)

st.write("Result:", res)
```

æ‚¨çœ‹åˆ°çš„æ˜¯é€šå¸¸æƒ…å†µä¸‹çš„æƒ…å†µï¼š

1. ç¬¬ä¸€æ¬¡è¿è¡Œä¼šå¯¼è‡´ç¼“å­˜æœªå‘½ä¸­ã€‚
2. æ¯æ¬¡åç»­è¿è¡Œéƒ½ä¼šå¯¼è‡´ç¼“å­˜å‘½ä¸­ã€‚

ç°åœ¨è®©æˆ‘ä»¬å°è¯•ä¿®æ”¹`inner_func()`å‡½æ•°ï¼š

```python
import streamlit as st
import time

def inner_func(a, b):
    st.write("inner_func(", a, ",", b, ") ran")
    return a ** b  # ğŸ‘ˆ Changed the * to ** here

@st.cache(suppress_st_warning=True)
def expensive_computation(a, b):
    st.write("Cache miss: expensive_computation(", a, ",", b, ") ran")
    time.sleep(2)  # This makes the function take 2s to run
    return inner_func(a, b) + 1

a = 2
b = 21
res = expensive_computation(a, b)

st.write("Result:", res)
```

å³ä½¿`inner_func()`æ²¡æœ‰è¢«æ³¨è§£ä¸º[`@st.cache`](/library/api-reference/performance/st.cache)ï¼Œä½†å½“æˆ‘ä»¬ç¼–è¾‘å…¶ä»£ç ä½“æ—¶ï¼Œä¼šåœ¨å¤–éƒ¨çš„`expensive_computation()`ä¸­å¼•èµ·â€œç¼“å­˜æœªå‘½ä¸­â€ã€‚

è¿™æ˜¯å› ä¸ºStreamlitæ€»æ˜¯éå†æ‚¨çš„ä»£ç åŠå…¶ä¾èµ–é¡¹ï¼Œä»¥éªŒè¯ç¼“å­˜çš„å€¼æ˜¯å¦ä»ç„¶æœ‰æ•ˆã€‚è¿™æ„å‘³ç€åœ¨å¼€å‘åº”ç”¨ç¨‹åºæ—¶ï¼Œæ‚¨å¯ä»¥è‡ªç”±åœ°ç¼–è¾‘ä»£ç ï¼Œè€Œä¸å¿…æ‹…å¿ƒç¼“å­˜ã€‚æ‚¨å¯¹åº”ç”¨ç¨‹åºæ‰€åšçš„ä»»ä½•æ›´æ”¹ï¼ŒStreamlitåº”è¯¥ä¼šè‡ªåŠ¨å¤„ç†æ­£ç¡®çš„äº‹æƒ…ï¼

Streamlitè¿˜èªæ˜åœ°åªéå†å±äºæ‚¨çš„åº”ç”¨ç¨‹åºçš„ä¾èµ–é¡¹ï¼Œå¹¶è·³è¿‡ä»»ä½•æ¥è‡ªå·²å®‰è£…çš„Pythonåº“çš„ä¾èµ–é¡¹ã€‚

## ç¤ºä¾‹5ï¼šä½¿ç”¨ç¼“å­˜åŠ å¿«åº”ç”¨ç¨‹åºåœ¨ç”¨æˆ·ä¹‹é—´çš„é€Ÿåº¦

å›åˆ°æˆ‘ä»¬çš„åŸå§‹å‡½æ•°ï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªå°éƒ¨ä»¶æ¥æ§åˆ¶`b`çš„å€¼ï¼š

```python
import streamlit as st
import time

@st.cache(suppress_st_warning=True)
def expensive_computation(a, b):
    st.write("Cache miss: expensive_computation(", a, ",", b, ") ran")
    time.sleep(2)  # This makes the function take 2s to run
    return a * b

a = 2
b = st.slider("Pick a number", 0, 10)  # ğŸ‘ˆ Changed this
res = expensive_computation(a, b)

st.write("Result:", res)
```

æ‚¨å°†ä¼šçœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š

- å¦‚æœæ‚¨å°†æ»‘å—ç§»åŠ¨åˆ°Streamlitä¹‹å‰æ²¡æœ‰è§è¿‡çš„æ•°å­—ï¼Œå°†ä¼šå†æ¬¡å‘ç”Ÿç¼“å­˜æœªå‘½ä¸­ã€‚è€Œä¸”ï¼Œä¹‹åæ¯æ¬¡é‡æ–°è¿è¡Œç›¸åŒçš„æ•°å­—éƒ½ä¼šå‘½ä¸­ç¼“å­˜ã€‚
- å¦‚æœæ‚¨å°†æ»‘å—ç§»å›Streamlitä¹‹å‰è§è¿‡çš„æ•°å­—ï¼Œå°†ä¼šå‘½ä¸­ç¼“å­˜ï¼Œåº”ç”¨ç¨‹åºå°†å¦‚é¢„æœŸèˆ¬å¿«é€Ÿè¿è¡Œã€‚

ä»è®¡ç®—æœºç§‘å­¦çš„è§’åº¦æ¥çœ‹ï¼Œè¿™é‡Œå‘ç”Ÿçš„æ˜¯[`@st.cache`](/library/api-reference/performance/st.cache)å¯¹`expensive_computation(a, b)`è¿›è¡Œ[memoization](https://en.wikipedia.org/wiki/Memoization)ï¼ˆè®°å¿†åŒ–ï¼‰ã€‚

ä½†æ˜¯ç°åœ¨è®©æˆ‘ä»¬æ›´è¿›ä¸€æ­¥ï¼å°è¯•ä»¥ä¸‹æ­¥éª¤ï¼š

1. å°†æ»‘å—ç§»åŠ¨åˆ°æ‚¨ä¹‹å‰æ²¡æœ‰å°è¯•è¿‡çš„æ•°å­—ï¼Œä¾‹å¦‚9ã€‚
2. æ‰“å¼€å¦ä¸€ä¸ªæµè§ˆå™¨é€‰é¡¹å¡ï¼ŒæŒ‡å‘æ‚¨çš„Streamlitåº”ç”¨ç¨‹åºï¼ˆé€šå¸¸åœ¨http://localhost:8501ä¸Šï¼‰ã€‚
3. åœ¨æ–°çš„é€‰é¡¹å¡ä¸­ï¼Œå°†æ»‘å—ç§»åŠ¨åˆ°9ã€‚

æ³¨æ„è¿™å®é™…ä¸Šæ˜¯ä¸€ä¸ªç¼“å­˜å‘½ä¸­ï¼ä¹Ÿå°±æ˜¯è¯´ï¼Œå°½ç®¡ç¬¬äºŒä¸ªç”¨æˆ·åœ¨æ­¤ä¹‹å‰ä»æœªå°†æ»‘å—ç§»åŠ¨åˆ°9ï¼Œä½†åœ¨ç¬¬äºŒä¸ªé€‰é¡¹å¡ä¸­å®é™…ä¸Šçœ‹ä¸åˆ°â€œç¼“å­˜æœªå‘½ä¸­â€æ–‡æœ¬ã€‚

è¿™æ˜¯å› ä¸ºStreamlitç¼“å­˜å¯¹æ‰€æœ‰ç”¨æˆ·éƒ½æ˜¯å…¨å±€çš„ã€‚å› æ­¤ï¼Œæ¯ä¸ªäººéƒ½ä¼šå¯¹å…¶ä»–äººçš„æ€§èƒ½äº§ç”Ÿå½±å“ã€‚

## ç¤ºä¾‹6ï¼šæ›´æ”¹ç¼“å­˜å€¼

æ­£å¦‚åœ¨[æ¦‚è¿°](#optimize-performance-with-stcache)éƒ¨åˆ†ä¸­æåˆ°çš„ï¼ŒStreamlitç¼“å­˜é€šè¿‡å¼•ç”¨æ¥å­˜å‚¨é¡¹ç›®ã€‚è¿™ä½¿å¾—Streamlitç¼“å­˜èƒ½å¤Ÿæ”¯æŒPythonæ— æ³•è¿›è¡Œå†…å­˜ç®¡ç†çš„ç»“æ„ï¼Œæ¯”å¦‚TensorFlowå¯¹è±¡ã€‚ç„¶è€Œï¼Œè¿™ä¹Ÿå¯èƒ½å¯¼è‡´æ„å¤–è¡Œä¸ºï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆStreamlitæœ‰ä¸€äº›æ£€æŸ¥æ¥æŒ‡å¯¼å¼€å‘äººå‘˜æœæ­£ç¡®çš„æ–¹å‘å‘å±•ã€‚ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›æ£€æŸ¥ã€‚

è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªå…·æœ‰ç¼“å­˜åŠŸèƒ½çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå¯å˜å¯¹è±¡ï¼Œç„¶åæˆ‘ä»¬å¯¹è¯¥å¯¹è±¡è¿›è¡Œäº†ä¿®æ”¹ï¼š

```python
import streamlit as st
import time

@st.cache(suppress_st_warning=True)
def expensive_computation(a, b):
    st.write("Cache miss: expensive_computation(", a, ",", b, ") ran")
    time.sleep(2)  # This makes the function take 2s to run
    return {"output": a * b}  # ğŸ‘ˆ Mutable object

a = 2
b = 21
res = expensive_computation(a, b)

st.write("Result:", res)

res["output"] = "result was manually mutated"  # ğŸ‘ˆ Mutated cached value

st.write("Mutated result:", res)
```

å½“æ‚¨ç¬¬ä¸€æ¬¡è¿è¡Œæ­¤åº”ç”¨ç¨‹åºæ—¶ï¼Œæ‚¨åº”è¯¥åœ¨å±å¹•ä¸Šçœ‹åˆ°ä¸‰æ¡æ¶ˆæ¯ï¼š

- ç¼“å­˜æœªå‘½ä¸­ï¼ˆ...ï¼‰
- ç»“æœï¼š{output: 42}
- å˜å¼‚ç»“æœï¼š{output: "ç»“æœè¢«æ‰‹åŠ¨å˜å¼‚"}

è¿™é‡Œæ²¡æœ‰ä»€ä¹ˆæ„å¤–ã€‚ä½†æ˜¯ç°åœ¨è¯·æ³¨æ„å½“æ‚¨é‡æ–°è¿è¡Œåº”ç”¨ç¨‹åºæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼ˆå³æŒ‰ä¸‹**R**é”®ï¼‰ï¼š

- ç»“æœï¼š{output: "ç»“æœè¢«æ‰‹åŠ¨å˜å¼‚"}
- å˜å¼‚ç»“æœï¼š{output: "ç»“æœè¢«æ‰‹åŠ¨å˜å¼‚"}
- ç¼“å­˜å¯¹è±¡å·²å˜å¼‚ï¼ˆ...ï¼‰

é‚£ä¹ˆé—®é¢˜æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

è¿™é‡Œå‘ç”Ÿçš„æƒ…å†µæ˜¯Streamlité€šè¿‡å¼•ç”¨ç¼“å­˜äº†è¾“å‡º`res`ã€‚å½“æ‚¨åœ¨ç¼“å­˜å‡½æ•°å¤–éƒ¨æ”¹å˜äº†`res["output"]`æ—¶ï¼Œä¸ç»æ„é—´ä¿®æ”¹äº†ç¼“å­˜ã€‚è¿™æ„å‘³ç€æ¯æ¬¡è°ƒç”¨`expensive_computation(2, 21)`éƒ½ä¼šè¿”å›é”™è¯¯çš„å€¼ï¼

ç”±äºè¿™ç§è¡Œä¸ºé€šå¸¸ä¸æ˜¯æ‚¨æ‰€æœŸæœ›çš„ï¼ŒStreamlitè¯•å›¾æä¾›å¸®åŠ©å¹¶æ˜¾ç¤ºè­¦å‘Šï¼ŒåŒæ—¶æä¾›ä¸€äº›ä¿®å¤ä»£ç çš„æ€è·¯ã€‚

åœ¨è¿™ç§ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œè§£å†³æ–¹æ³•å°±æ˜¯ä¸è¦åœ¨ç¼“å­˜å‡½æ•°å¤–éƒ¨ä¿®æ”¹`res["output"]`ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬æ²¡æœ‰ä»»ä½•å¥½ç†ç”±è¿™æ ·åšï¼å¦ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨`res = deepcopy(expensive_computation(2, 21))`æ¥å…‹éš†ç»“æœå€¼ã€‚è¯·æŸ¥çœ‹åä¸º[ä¿®å¤ç¼“å­˜é—®é¢˜](/knowledge-base/using-streamlit/caching-issues)çš„éƒ¨åˆ†ï¼Œè·å–æ›´å¤šå…³äºè¿™äº›æ–¹æ³•çš„ä¿¡æ¯ã€‚

## é«˜çº§ç¼“å­˜

åœ¨[caching](/library/advanced-features/caching)ä¸­ï¼Œæ‚¨å·²ç»äº†è§£äº†Streamlitç¼“å­˜ï¼Œå¯ä»¥ä½¿ç”¨[`@st.cache`](/library/api-reference/performance/st.cache)è£…é¥°å™¨æ¥è®¿é—®ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæ‚¨å°†äº†è§£Streamlitç¼“å­˜åŠŸèƒ½æ˜¯å¦‚ä½•å®ç°çš„ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥æé«˜Streamlitåº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚

ç¼“å­˜æ˜¯ä¸€ä¸ªé”®å€¼å­˜å‚¨ï¼Œå…¶ä¸­é”®æ˜¯æ‚¨è°ƒç”¨å‡½æ•°æ—¶è¾“å…¥å‚æ•°çš„å“ˆå¸Œå€¼ï¼š
1. å‡½æ•°ä¸­ä½¿ç”¨çš„ä»»ä½•å¤–éƒ¨å˜é‡çš„å€¼
2. å‡½æ•°çš„ä¸»ä½“
3. åœ¨ç¼“å­˜å‡½æ•°å†…éƒ¨ä½¿ç”¨çš„ä»»ä½•å‡½æ•°çš„ä¸»ä½“

è€Œè¯¥å€¼æ˜¯ä¸€ä¸ªå…ƒç»„ï¼ŒåŒ…æ‹¬ï¼š

- ç¼“å­˜çš„è¾“å‡º
- ç¼“å­˜è¾“å‡ºçš„å“ˆå¸Œå€¼ï¼ˆæ‚¨å¾ˆå¿«å°±ä¼šäº†è§£åŸå› ï¼‰

å¯¹äºé”®å’Œè¾“å‡ºå“ˆå¸Œå€¼ï¼ŒStreamlitä½¿ç”¨äº†ä¸€ç§ä¸“é—¨çš„å“ˆå¸Œå‡½æ•°ï¼Œå®ƒçŸ¥é“å¦‚ä½•éå†ä»£ç ï¼Œå“ˆå¸Œç‰¹æ®Šå¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ç”¨æˆ·æ¥[è‡ªå®šä¹‰å…¶è¡Œä¸º](#the-hash_funcs-parameter)ã€‚

ä¾‹å¦‚ï¼Œå½“ä½¿ç”¨[`@st.cache`](/library/api-reference/performance/st.cache)è£…é¥°çš„å‡½æ•°`expensive_computation(a, b)`ä»¥`a=2`å’Œ`b=21`çš„å‚æ•°æ‰§è¡Œæ—¶ï¼ŒStreamlitä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

1. è®¡ç®—ç¼“å­˜é”®
2. å¦‚æœåœ¨ç¼“å­˜ä¸­æ‰¾åˆ°é”®ï¼Œåˆ™ï¼š
   - æå–å…ˆå‰ç¼“å­˜çš„ï¼ˆè¾“å‡ºï¼Œè¾“å‡ºå“ˆå¸Œï¼‰å…ƒç»„ã€‚
   - æ‰§è¡Œ**è¾“å‡ºå˜å¼‚æ£€æŸ¥**ï¼Œè®¡ç®—è¾“å‡ºçš„æ–°å“ˆå¸Œå€¼å¹¶ä¸å­˜å‚¨çš„`output_hash`è¿›è¡Œæ¯”è¾ƒã€‚
     - å¦‚æœä¸¤ä¸ªå“ˆå¸Œå€¼ä¸åŒï¼Œåˆ™æ˜¾ç¤º**ç¼“å­˜å¯¹è±¡å·²æ›´æ”¹**è­¦å‘Šã€‚ï¼ˆæ³¨æ„ï¼šè®¾ç½®`allow_output_mutation=True`å¯ä»¥ç¦ç”¨æ­¤æ­¥éª¤ï¼‰ã€‚
1. å¦‚æœåœ¨ç¼“å­˜ä¸­æ‰¾ä¸åˆ°è¾“å…¥é”®ï¼Œåˆ™ï¼š
   - æ‰§è¡Œç¼“å­˜å‡½æ•°ï¼ˆå³`output = expensive_computation(2, 21)`ï¼‰ã€‚
   - ä»å‡½æ•°çš„è¾“å‡ºè®¡ç®—`output_hash`ã€‚
   - å°†`key â†’ (output, output_hash)`å­˜å‚¨åœ¨ç¼“å­˜ä¸­ã€‚
1. è¿”å›è¾“å‡ºç»“æœã€‚

å¦‚æœé‡åˆ°é”™è¯¯ï¼Œå°†å¼•å‘å¼‚å¸¸ã€‚å¦‚æœåœ¨è®¡ç®—å“ˆå¸Œå€¼æ—¶å‡ºç°é”™è¯¯ï¼Œæ— è®ºæ˜¯å¯¹é”®è¿˜æ˜¯å¯¹è¾“å‡ºè¿›è¡Œå“ˆå¸Œï¼Œéƒ½ä¼šå¼•å‘`UnhashableTypeError`é”™è¯¯ã€‚å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·å‚é˜…[ä¿®å¤ç¼“å­˜é—®é¢˜](/knowledge-base/using-streamlit/caching-issues)ã€‚

### hash_funcs å‚æ•°

å¦‚ä¸Šæ‰€è¿°ï¼ŒStreamlit çš„ç¼“å­˜åŠŸèƒ½ä¾èµ–äºå“ˆå¸Œè®¡ç®—æ¥è®¡ç®—ç¼“å­˜å¯¹è±¡çš„é”®ï¼Œå¹¶æ£€æµ‹ç¼“å­˜ç»“æœä¸­çš„æ„å¤–å˜åŒ–ã€‚

ä¸ºäº†å¢åŠ è¡¨è¾¾èƒ½åŠ›ï¼ŒStreamlitå…è®¸æ‚¨ä½¿ç”¨`hash_funcs`å‚æ•°è¦†ç›–æ­¤å“ˆå¸Œè¿‡ç¨‹ã€‚å‡è®¾æ‚¨å®šä¹‰äº†ä¸€ä¸ªåä¸º`FileReference`çš„ç±»å‹ï¼Œå®ƒæŒ‡å‘æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ–‡ä»¶ï¼š

```python
class FileReference:
    def __init__(self, filename):
        self.filename = filename


@st.cache
def func(file_reference):
    ...
```

é»˜è®¤æƒ…å†µä¸‹ï¼ŒStreamlité€šè¿‡é€’å½’åœ°éå†è‡ªå®šä¹‰ç±»ï¼ˆä¾‹å¦‚`FileReference`ï¼‰æ¥ç”Ÿæˆå“ˆå¸Œå€¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå“ˆå¸Œå€¼æ˜¯æ–‡ä»¶åå±æ€§çš„å“ˆå¸Œå€¼ã€‚åªè¦æ–‡ä»¶åä¸æ”¹å˜ï¼Œå“ˆå¸Œå€¼å°±ä¼šä¿æŒä¸å˜ã€‚

ç„¶è€Œï¼Œå¦‚æœæ‚¨å¸Œæœ›å“ˆå¸Œå‡½æ•°è¿˜æ£€æŸ¥æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼Œè€Œä¸ä»…ä»…æ˜¯æ–‡ä»¶åï¼Œè¿™æ˜¯å¯ä»¥é€šè¿‡[`@st.cache`](/library/api-reference/performance/st.cache)çš„`hash_funcs`å‚æ•°å®ç°çš„ï¼š

```python
class FileReference:
    def __init__(self, filename):
        self.filename = filename

def hash_file_reference(file_reference):
    filename = file_reference.filename
    return (filename, os.path.getmtime(filename))

@st.cache(hash_funcs={FileReference: hash_file_reference})
def func(file_reference):
    ...
```

æ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥é€šè¿‡æ–‡ä»¶å†…å®¹å¯¹`FileReference`å¯¹è±¡è¿›è¡Œå“ˆå¸Œå¤„ç†ï¼š

```python
class FileReference:
    def __init__(self, filename):
        self.filename = filename

def hash_file_reference(file_reference):
    with open(file_reference.filename) as f:
      return f.read()

@st.cache(hash_funcs={FileReference: hash_file_reference})
def func(file_reference):
    ...
```

<æ³¨æ„>

ç”±äºStreamlitçš„å“ˆå¸Œå‡½æ•°æ˜¯é€’å½’çš„ï¼Œæ‚¨ä¸éœ€è¦åœ¨`hash_file_reference`ä¸­å“ˆå¸Œæ–‡ä»¶å†…å®¹ã€‚ç›¸åï¼Œæ‚¨å¯ä»¥è¿”å›ä¸€ä¸ªåŸå§‹ç±»å‹ï¼Œä¾‹å¦‚æ–‡ä»¶çš„å†…å®¹ï¼ŒStreamlitçš„å†…éƒ¨å“ˆå¸Œå‡½æ•°å°†ä»ä¸­è®¡ç®—å®é™…çš„å“ˆå¸Œå€¼ã€‚

</æ³¨æ„>

### å…¸å‹çš„å“ˆå¸Œå‡½æ•°

è™½ç„¶å¯ä»¥ç¼–å†™è‡ªå®šä¹‰å“ˆå¸Œå‡½æ•°ï¼Œä½†è®©æˆ‘ä»¬å…ˆçœ‹çœ‹Pythonæä¾›çš„ä¸€äº›å¼€ç®±å³ç”¨çš„å·¥å…·ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å“ˆå¸Œå‡½æ•°åŠå…¶é€‚ç”¨çš„æƒ…å†µã€‚

Pythonçš„[`id`](https://docs.python.org/3/library/functions.html#id)å‡½æ•° | [ç¤ºä¾‹](#example-1-pass-a-database-connection-around)

- é€Ÿåº¦ï¼šå¿«
- ç”¨ä¾‹ï¼šå¦‚æœæ‚¨è¦å¯¹ä¸€ä¸ªå•ä¾‹å¯¹è±¡è¿›è¡Œå“ˆå¸Œï¼Œæ¯”å¦‚ä¸€ä¸ªæ‰“å¼€çš„æ•°æ®åº“è¿æ¥æˆ–è€…TensorFlowä¼šè¯ã€‚è¿™äº›å¯¹è±¡åªä¼šè¢«å®ä¾‹åŒ–ä¸€æ¬¡ï¼Œæ— è®ºæ‚¨çš„è„šæœ¬é‡å¤è¿è¡Œå¤šå°‘æ¬¡ã€‚

`lambda _: None` | [ç¤ºä¾‹](#example-2-turn-off-hashing-for-a-specific-type)

- é€Ÿåº¦ï¼šå¿«
- ç”¨ä¾‹ï¼šå¦‚æœæ‚¨æƒ³è¦å…³é—­å¯¹è¯¥ç±»å‹çš„å“ˆå¸Œã€‚è¿™åœ¨æ‚¨çŸ¥é“å¯¹è±¡ä¸ä¼šå‘ç”Ÿå˜åŒ–æ—¶éå¸¸æœ‰ç”¨ã€‚

Pythonçš„[`hash()`](https://docs.python.org/3/library/functions.html#hash)å‡½æ•° | [ç¤ºä¾‹](#example-3-use-pythons-hash-function)

- é€Ÿåº¦ï¼šæ ¹æ®ç¼“å­˜å¯¹è±¡çš„å¤§å°å¯èƒ½ä¼šè¾ƒæ…¢
- ä½¿ç”¨åœºæ™¯ï¼šå¦‚æœPythonå·²ç»çŸ¥é“å¦‚ä½•æ­£ç¡®åœ°å¯¹è¯¥ç±»å‹è¿›è¡Œå“ˆå¸Œã€‚

è‡ªå®šä¹‰å“ˆå¸Œå‡½æ•° | [ç¤ºä¾‹](#the-hash_funcs-parameter)

- é€Ÿåº¦ï¼šä¸é€‚ç”¨
- ä½¿ç”¨åœºæ™¯ï¼šå¦‚æœæ‚¨æƒ³è¦è¦†ç›–Streamlitå¯¹ç‰¹å®šç±»å‹è¿›è¡Œå“ˆå¸Œçš„æ–¹å¼ã€‚

### ç¤ºä¾‹1ï¼šä¼ é€’æ•°æ®åº“è¿æ¥

å‡è®¾æˆ‘ä»¬æƒ³è¦æ‰“å¼€ä¸€ä¸ªæ•°æ®åº“è¿æ¥ï¼Œå¯ä»¥åœ¨å¤šæ¬¡è¿è¡ŒStreamlitåº”ç”¨ç¨‹åºæ—¶é‡å¤ä½¿ç”¨ã€‚ä¸ºæ­¤ï¼Œæ‚¨å¯ä»¥åˆ©ç”¨ç¼“å­˜å¯¹è±¡å­˜å‚¨çš„å¼•ç”¨ï¼Œè‡ªåŠ¨åˆå§‹åŒ–å’Œé‡å¤ä½¿ç”¨è¿æ¥ï¼š

```python
@st.cache(allow_output_mutation=True)
def get_database_connection():
    return db.get_connection()
```

åªéœ€3è¡Œä»£ç ï¼Œæ•°æ®åº“è¿æ¥å°†è¢«åˆ›å»ºä¸€æ¬¡å¹¶å­˜å‚¨åœ¨ç¼“å­˜ä¸­ã€‚ç„¶åï¼Œæ¯æ¬¡è°ƒç”¨`get_database_connection`æ—¶ï¼Œå·²åˆ›å»ºçš„è¿æ¥å¯¹è±¡å°†è‡ªåŠ¨é‡ç”¨ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒå˜æˆäº†ä¸€ä¸ªå•ä¾‹ã€‚

<æç¤º>

ä½¿ç”¨`allow_output_mutation=True`æ ‡å¿—æ¥æŠ‘åˆ¶ä¸å¯å˜æ€§æ£€æŸ¥ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢Streamlitå°è¯•å¯¹è¾“å‡ºè¿æ¥è¿›è¡Œå“ˆå¸Œï¼Œå¹¶åœ¨æ­¤è¿‡ç¨‹ä¸­å…³é—­Streamlitçš„çªå˜è­¦å‘Šã€‚

</æç¤º>

å¦‚æœæ‚¨æƒ³ç¼–å†™ä¸€ä¸ªæ¥æ”¶æ•°æ®åº“è¿æ¥ä½œä¸ºè¾“å…¥çš„å‡½æ•°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `hash_funcs`ï¼š

```python
@st.cache(hash_funcs={DBConnection: id})
def get_users(connection):
    # Note: We assume that connection is of type DBConnection.
    return connection.execute_sql('SELECT * from Users')
```

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨Pythonå†…ç½®çš„`id`å‡½æ•°ï¼Œå› ä¸ºè¿æ¥å¯¹è±¡æ˜¯é€šè¿‡`get_database_connection`å‡½æ•°ä»Streamlitç¼“å­˜ä¸­è·å–çš„ã€‚è¿™æ„å‘³ç€æ¯æ¬¡ä¼ é€’çš„éƒ½æ˜¯åŒä¸€ä¸ªè¿æ¥å®ä¾‹ï¼Œå› æ­¤å®ƒçš„idå§‹ç»ˆç›¸åŒã€‚ç„¶è€Œï¼Œå¦‚æœæ‚¨æ°å¥½æœ‰ä¸€ä¸ªæŒ‡å‘å®Œå…¨ä¸åŒæ•°æ®åº“çš„ç¬¬äºŒä¸ªè¿æ¥å¯¹è±¡ï¼Œå°†å…¶ä¼ é€’ç»™`get_users`ä¹Ÿæ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºå®ƒçš„idä¿è¯ä¸ç¬¬ä¸€ä¸ªidä¸åŒã€‚

è¿™äº›è®¾è®¡æ¨¡å¼é€‚ç”¨äºä»»ä½•æ—¶å€™æ‚¨æœ‰ä¸€ä¸ªæŒ‡å‘å¤–éƒ¨èµ„æºçš„å¯¹è±¡ï¼Œæ¯”å¦‚æ•°æ®åº“è¿æ¥æˆ–Tensorflowä¼šè¯ã€‚

### ç¤ºä¾‹2ï¼šä¸ºç‰¹å®šç±»å‹å…³é—­å“ˆå¸Œ

æ‚¨å¯ä»¥ä¸ºç‰¹å®šç±»å‹å…³é—­å®Œå…¨å“ˆå¸Œï¼Œé€šè¿‡ç»™å®ƒæä¾›ä¸€ä¸ªè¿”å›å¸¸é‡çš„è‡ªå®šä¹‰å“ˆå¸Œå‡½æ•°ã€‚æ‚¨å¯èƒ½ä¼šè¿™æ ·åšçš„ä¸€ä¸ªåŸå› æ˜¯é¿å…å¯¹å¤§å‹ã€æ…¢é€Ÿå“ˆå¸Œçš„å¯¹è±¡è¿›è¡Œå“ˆå¸Œï¼Œè€Œæ‚¨çŸ¥é“è¿™äº›å¯¹è±¡ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚ä¾‹å¦‚ï¼š

```python
@st.cache(hash_funcs={pd.DataFrame: lambda _: None})
def func(huge_constant_dataframe):
    ...
```

å½“Streamlité‡åˆ°è¿™ç§ç±»å‹çš„å¯¹è±¡æ—¶ï¼Œå®ƒæ€»æ˜¯å°†å¯¹è±¡è½¬æ¢ä¸º`None`ï¼Œæ— è®ºå®ƒæ­£åœ¨æŸ¥çœ‹çš„æ˜¯`FooType`çš„å“ªä¸ªå®ä¾‹ã€‚è¿™æ„å‘³ç€æ‰€æœ‰å®ä¾‹éƒ½è¢«æ•£åˆ—åˆ°ç›¸åŒçš„å€¼ï¼Œä»è€Œæœ‰æ•ˆåœ°å–æ¶ˆäº†æ•£åˆ—æœºåˆ¶ã€‚

### ç¤ºä¾‹3ï¼šä½¿ç”¨Pythonçš„hash()å‡½æ•°

æœ‰æ—¶ï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä½¿ç”¨Pythonçš„é»˜è®¤å“ˆå¸Œå‡½æ•°è€Œä¸æ˜¯Streamlitçš„å“ˆå¸Œå‡½æ•°ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½é‡åˆ°äº†ä¸€ç§Streamlitæ— æ³•å“ˆå¸Œçš„ç±»å‹ï¼Œä½†å®ƒå¯ä»¥ä½¿ç”¨Pythonå†…ç½®çš„`hash()`å‡½æ•°è¿›è¡Œå“ˆå¸Œã€‚

```python
@st.cache(hash_funcs={FooType: hash})
def func(...):
    ...
```
