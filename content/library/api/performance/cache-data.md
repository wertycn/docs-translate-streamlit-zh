---
description: st.cache_data is used to cache functions that return data (e.g. dataframe
  transforms, database queries, ML inference).
slug: /library/api-reference/performance/st.cache_data
title: st.cache_data
---

<Tip>

æœ¬é¡µé¢ä»…åŒ…å«æœ‰å…³ `st.cache_data` API çš„ä¿¡æ¯ã€‚è¦æ·±å…¥äº†è§£ç¼“å­˜åŠå…¶ä½¿ç”¨æ–¹æ³•ï¼Œè¯·æŸ¥çœ‹ [Caching](/library/advanced-features/caching)ã€‚

</Tip>

<Autofunction function="streamlit.cache_data" />

## åœ¨ç¼“å­˜å‡½æ•°ä¸­ä½¿ç”¨ Streamlit å‘½ä»¤

### é™æ€å…ƒç´ 

ä»1.16.0ç‰ˆæœ¬å¼€å§‹ï¼Œç¼“å­˜å‡½æ•°å¯ä»¥åŒ…å«Streamlitå‘½ä»¤ï¼ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥è¿™æ ·åšï¼š

```python
@st.cache_data
def get_api_data():
    data = api.get(...)
    st.success("Fetched data from API!")  # ğŸ‘ˆ Show a success message
    return data
```

æ­£å¦‚æˆ‘ä»¬æ‰€çŸ¥ï¼ŒStreamlitåªä¼šåœ¨ä¹‹å‰æ²¡æœ‰ç¼“å­˜çš„æƒ…å†µä¸‹è¿è¡Œæ­¤å‡½æ•°ã€‚åœ¨ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ï¼Œåº”ç”¨ç¨‹åºä¼šæ˜¾ç¤º`st.success`æ¶ˆæ¯ã€‚ä½†æ˜¯åœ¨åç»­è¿è¡Œä¸­ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå®ƒä»ç„¶ä¼šæ˜¾ç¤ºï¼Streamlitæ„è¯†åˆ°åœ¨ç¼“å­˜çš„å‡½æ•°å†…éƒ¨æœ‰ä¸€ä¸ª`st.`å‘½ä»¤ï¼Œå¹¶åœ¨ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ä¿å­˜å®ƒï¼Œå¹¶åœ¨åç»­è¿è¡Œä¸­é‡æ–°æ’­æ”¾ã€‚é‡æ–°æ’­æ”¾é™æ€å…ƒç´ é€‚ç”¨äºç¼“å­˜è£…é¥°å™¨ã€‚

æ‚¨è¿˜å¯ä»¥ä½¿ç”¨æ­¤åŠŸèƒ½æ¥ç¼“å­˜æ•´ä¸ªUIçš„éƒ¨åˆ†ï¼š

```python
@st.cache_data
def show_data():
    st.header("Data analysis")
    data = api.get(...)
    st.success("Fetched data from API!")
    st.write("Here is a plot of the data:")
    st.line_chart(data)
    st.write("And here is the raw data:")
    st.dataframe(data)
```

### è¾“å…¥å°éƒ¨ä»¶

æ‚¨è¿˜å¯ä»¥åœ¨ç¼“å­˜å‡½æ•°ä¸­ä½¿ç”¨[äº¤äº’å¼è¾“å…¥å°éƒ¨ä»¶](/library/api-reference/widgets)ï¼Œå¦‚`st.slider`æˆ–`st.text_input`ã€‚å°éƒ¨ä»¶å›æ”¾ç›®å‰æ˜¯ä¸€ä¸ªå®éªŒæ€§åŠŸèƒ½ã€‚è¦å¯ç”¨å®ƒï¼Œæ‚¨éœ€è¦è®¾ç½®`experimental_allow_widgets`å‚æ•°ï¼š

```python
@st.cache_data(experimental_allow_widgets=True)  # ğŸ‘ˆ Set the parameter
def get_data():
    num_rows = st.slider("Number of rows to get")  # ğŸ‘ˆ Add a slider
    data = api.get(..., num_rows)
    return data
```

Streamlitå°†æ»‘å—è§†ä¸ºç¼“å­˜å‡½æ•°çš„é¢å¤–è¾“å…¥å‚æ•°ã€‚å¦‚æœæ‚¨æ›´æ”¹æ»‘å—ä½ç½®ï¼ŒStreamlitå°†æ£€æŸ¥æ˜¯å¦å·²ç»å¯¹è¯¥æ»‘å—å€¼è¿›è¡Œäº†ç¼“å­˜ã€‚å¦‚æœæ˜¯ï¼Œåˆ™è¿”å›ç¼“å­˜çš„å€¼ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™ä½¿ç”¨æ–°çš„æ»‘å—å€¼é‡æ–°è¿è¡Œå‡½æ•°ã€‚

åœ¨ç¼“å­˜å‡½æ•°ä¸­ä½¿ç”¨å°éƒ¨ä»¶éå¸¸å¼ºå¤§ï¼Œå› ä¸ºå®ƒå…è®¸æ‚¨ç¼“å­˜åº”ç”¨ç¨‹åºçš„æ•´ä¸ªéƒ¨åˆ†ã€‚ä½†æ˜¯è¿™ä¹Ÿå¯èƒ½å¸¦æ¥ä¸€å®šçš„å±é™©ï¼ç”±äºStreamlitå°†å°éƒ¨ä»¶å€¼è§†ä¸ºé¢å¤–çš„è¾“å…¥å‚æ•°ï¼Œå®ƒå¾ˆå®¹æ˜“å¯¼è‡´è¿‡å¤šçš„å†…å­˜ä½¿ç”¨ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œæ‚¨çš„ç¼“å­˜å‡½æ•°æœ‰äº”ä¸ªæ»‘å—ï¼Œå¹¶è¿”å›ä¸€ä¸ª100MBçš„DataFrameã€‚ç„¶åï¼Œå¯¹äºè¿™äº”ä¸ªæ»‘å—å€¼çš„æ¯ä¸ªæ’åˆ—ï¼Œéƒ½ä¼šå°†100MBæ·»åŠ åˆ°ç¼“å­˜ä¸­â€”â€”å³ä½¿è¿™äº›æ»‘å—å¹¶ä¸å½±å“è¿”å›çš„æ•°æ®ï¼è¿™äº›æ·»åŠ æ“ä½œä¼šä½¿æ‚¨çš„ç¼“å­˜è¿…é€Ÿè†¨èƒ€ã€‚å¦‚æœæ‚¨åœ¨ç¼“å­˜å‡½æ•°ä¸­ä½¿ç”¨å°éƒ¨ä»¶ï¼Œè¯·æ³¨æ„è¿™ä¸ªé™åˆ¶ã€‚æˆ‘ä»¬å»ºè®®ä»…åœ¨å°éƒ¨ä»¶ç›´æ¥å½±å“ç¼“å­˜è¿”å›å€¼çš„éš”ç¦»éƒ¨åˆ†ä¸­ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚

<è­¦å‘Š>

å¯¹äºç¼“å­˜å‡½æ•°ä¸­çš„å°éƒ¨ä»¶çš„æ”¯æŒç›®å‰å¤„äºå®éªŒæ€§é˜¶æ®µã€‚æˆ‘ä»¬å¯èƒ½éšæ—¶æ›´æ”¹æˆ–åˆ é™¤å®ƒï¼Œè€Œä¸ä¼šæå‰è­¦å‘Šã€‚è¯·è°¨æ…ä½¿ç”¨ï¼
</è­¦å‘Š>

<æ³¨é‡Š>

ç›®å‰åœ¨ç¼“å­˜å‡½æ•°ä¸­ä¸æ”¯æŒä¸¤ä¸ªå°éƒ¨ä»¶ï¼š`st.file_uploader`å’Œ`st.camera_input`ã€‚æˆ‘ä»¬å¯èƒ½åœ¨å°†æ¥æ”¯æŒå®ƒä»¬ã€‚å¦‚æœæ‚¨éœ€è¦å®ƒä»¬ï¼Œè¯·éšæ—¶[æäº¤GitHubé—®é¢˜](https://github.com/streamlit/streamlit/issues)ï¼
</æ³¨é‡Š>